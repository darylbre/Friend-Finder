<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <title>Survey</title>
</head>

<body>
    <div class="container">
        <h1>Survey</h1>

        <div class="form-group">
            <label for="usr">Name:</label>
            <input type="text" class="form-control" id="usr">
        </div>
        <div class="form-group">
            <label for="pwd">Image Link:</label>
            <input type="text" class="form-control" id="pwd">
        </div>

        <div class="form-group">
            <h3> QUESTION 1</h3>
            <label for="question1">It is important to me to consider my friends’ opinions before I act.</label><br>
            <select class="form-control" id="question1" class="">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
            </select>
        </div>
        <div class="form-group">
            <h3> QUESTION 2</h3>
            <label for="question2">My friends’ ideas about what I should do about my emotional well
                being are more important than my own ideas.</label><br>
            <select class="form-control" id="question2" class="">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
            </select>
        </div>
        <div class="form-group">
            <h3> QUESTION 3</h3>
            <label for="question3">. My friend’s ideas about whom I should date or marry are more
                important than my own ideas.</label><br>
            <select class="form-control" id="question3" class="">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
            </select>
        </div>
        <div class="form-group">
            <h3> QUESTION 4</h3>
            <label for="question4">I deal with personal problems by myself rather than ask one of my
                friends (not from the same ethnic group as I am) for help.</label><br>
            <select class="form-control" id="question4" class="">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
            </select>
        </div>
        <div class="form-group">
            <h3> QUESTION 5</h3>
            <label for="question5">My friends’ ideas influence my decisions about my emotional well­being.</label><br>
            <select class="form-control" id="question5" class="">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
            </select>
        </div>
        <div class="form-group">
            <h3> QUESTION 6</h3>
            <label for="question6">My own ideas about my education or work are more important
                than my friends’ ideas.</label><br>
            <select class="form-control" id="question6" class="">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
            </select>
        </div>
        <div class="form-group">
            <h3> QUESTION 7</h3>
            <label for="question7">I take into consideration what my friends will think of me before I
                act.</label><br>
            <select class="form-control" id="question7" class="">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
            </select>
        </div>
        <div class="form-group">
            <h3> QUESTION 8</h3>
            <label for="question8">I ought to get help from my friends with personal problems rather
                than struggle by myself.</label><br>
            <select class="form-control" id="question8" class="">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
            </select>
        </div>
        <div class="form-group">
            <h3> QUESTION 9</h3>
            <label for="question9">I do not feel that I should spend much of my leisure time with my
                parents.</label><br>
            <select class="form-control" id="question9" class="">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
            </select>
            <div>
                <div class="form-group">
                    <h3> QUESTION 10</h3>
                    <label for="question10">With my friends everyone should agree before we decide what
                        activity to do.</label><br>
                    <select class="form-control" id="question10" class="">
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                    </select>
                </div>
            </div>
            <button type="submit" class="btn btn-primary" id="submit_btn"> Submit</button>
        </div>

        <div class="modal" id="myModal2">
            <div class="modal-dialog">
                <div class="modal-content">

                    <!-- Modal Header -->
                    <div class="modal-header">
                        <h4 class="modal-title"></h4>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>

                    <!-- Modal body -->
                    <div class="modal-body">
                        Modal body..
                    </div>

                    <!-- Modal footer -->
                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                    </div>

                </div>
            </div>
        </div>


        <script type="text/javascript">
            // Question: What does this code do?
            $("#submit_btn").on("click", function (event) {
                event.preventDefault();
                const name = $("#usr").val().trim();
                const photo = $("#pwd").val().trim();
                const q1 = $("#question1").val().trim();
                const q2 = $("#question2").val().trim();

                var newSurvey = {
                    name: name,
                    photo: photo,
                    scores: [q1, q2]
                };
                console.log(newSurvey);
            
                $.post("/api/friends", newSurvey)
                    .then(function (data) {
                        console.log("data", data);
                        $(".modal-title").text(data.name);
                        $(".modal-body").html(`<img src=${data.photo} style= "height: 300px; width: 300px" />`);
                        $("#myModal2").modal();

                    });
            });
        </script>
</body>

</html>